
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Homework 09 Exercises &#8212; DS10 Homeworks</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Homework 10 Exercises" href="HW10_regression.html" />
    <link rel="prev" title="Homework 08 Exercises" href="HW08_distributions.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">DS10 Homeworks</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="README.html">
   DS10 Homeworks
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="HW01_variables.html">
   Instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HW01_variables.html#homework-01-exercises">
   Homework 01 Exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HW01_variables.html#instructions-for-submitting-the-hw-notebook">
   Instructions for submitting the HW notebook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HW02_times.html">
   Homework 02 Exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HW03_arrays.html">
   Homework 03 Exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HW04_loops.html">
   Homework 04 Exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HW05_dictionaries.html">
   Homework 05 Exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HW06_plotting.html">
   Homework 06 Exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HW07_dataframes.html">
   Homework 07 Exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HW08_distributions.html">
   Homework 08 Exercises
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Homework 09 Exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HW10_regression.html">
   Homework 10 Exercises
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/HW09_relationships.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/stat10/DS10-Python-HW"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/stat10/DS10-Python-HW/master?urlpath=tree/HW09_relationships.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="homework-09-exercises">
<h1>Homework 09 Exercises<a class="headerlink" href="#homework-09-exercises" title="Permalink to this headline">¶</a></h1>
<p>The following exercises are based on the material from <a class="reference external" href="https://colab.research.google.com/github/AllenDowney/ElementsOfDataScience/blob/master/09_relatioships.ipynb">Lab 9</a>. You will again explore the same housing affordability dataset from the <a class="reference external" href="https://www.huduser.gov/portal/pdrdatas_landing.html">American Housing Survey</a> as HW 8. In these exercises, you will be looking at some of the relationships between different columns of that data.</p>
<p>Run the cells below to import relevant libraries and load the data into a dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">linregress</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Download data</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;thads2013n.csv&#39;</span><span class="p">):</span>
    <span class="o">!</span>wget https://raw.githubusercontent.com/stat10/DS10-Python-HW/master/Data/thads2013n.csv

<span class="c1"># Create dataframe</span>
<span class="n">housing_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;thads2013n.csv&#39;</span><span class="p">)</span>
<span class="n">housing_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Exercise 1:</strong> Let’s explore whether there is a relationship between the monthly cost of utilities and the age of the head of a household. The column <code class="docutils literal notranslate"><span class="pre">AGE1</span></code> contains the age of the head of a household and <code class="docutils literal notranslate"><span class="pre">UTILITY</span></code> contains the average monthly utility cost. In this exercise you will create a scatter plot of the monthly utility cost <em>vs.</em> age.</p>
<p>The default scatter plot will give you the figure on the left below. Complete the subparts below to make your scatter plot look like the one on the right.</p>
<p><img alt="alt text" src="https://raw.githubusercontent.com/stat10/DS10-Python-HW/master/Images/scatter_cmp.png" /></p>
<p><strong>1a:</strong> Load the <code class="docutils literal notranslate"><span class="pre">AGE1</span></code> and <code class="docutils literal notranslate"><span class="pre">UTILITY</span></code> columns into variables and create a plot without any modifications using those variables. This should look like the figure on the left above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
<p><strong>1b:</strong> Check the age and utility cost variables for unexpected values. For example, check what the minimum and maximum values in those variables are. Create variables with cleaned data by replacing the unexpected values with <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
<p><strong>1b:</strong> Create a scatter plot of the cleaned data. Add transparency to the markers, reduce the marker size, and change the limits of the axes appropriately.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
<p><strong>1c:</strong> Add jitter to the age variable and create the final scatter plot.</p>
<p>Note that when reporting age in years, one generally tends to round down. For example, a 20 year old will report being 20 years old from the day of their 20th birthday all the way until the day before their 21st birthday. So, one way to take this rounding down into context is to use a uniform random variable distributed between 0 and 1 instead of a normal random variable with mean 0.</p>
<p><em>Hint:</em> Look up <code class="docutils literal notranslate"><span class="pre">np.random.uniform()</span></code> for adding jitter to the age variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
<p><strong>1d:</strong> Briefly write what you observe in the relationship between utility cost and age of the head of household.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Exercise 2:</strong> Let’s visualize a relatively simpler relationship. In this exercise, you need to create a plot to visualize the relationship between the monthly cost of utilities and the number of rooms in a housing unit. Complete all the subparts below.</p>
<p><strong>2a:</strong> The number of rooms can be found in the column <code class="docutils literal notranslate"><span class="pre">ROOMS</span></code>. Visualize the relationship between monthly utility cost and the number of rooms in a unit using scatter plots. You will of course notice that the number of rooms is a discrete variable. Create a figure with two subplots (see <a class="reference external" href="https://colab.research.google.com/github/AllenDowney/ElementsOfDataScience/blob/master/09_relatioships.ipynb">Lab 9</a> to find code for creating subplots). On the left, display a scatter plot of utility cost <em>vs.</em> number of rooms and on the right, the same plot but with jitter added to the number of rooms variable. Briefly (in a couple of sentences), write your thoughts on the pros and cons of adding jitter to the number of rooms data to make it look continuous.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
<p><strong>2b:</strong> Now, visualize the same relationship (monthly utility cost <em>vs.</em> number of rooms) using a violin plot and a box plot. Again, create a figure with two subplots. On the left, display the violin plot and on the right, the box plot. Briefly, write your thoughts comparing the pros and cons of the violin plot and the box plot.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Exercise 3a:</strong> In this exercise, let’s look at the correlation matrix for a few columns in the dataset. Create a subset of the the housing dataset with columns corresponding to the following data.</p>
<ul class="simple">
<li><p>Houinsg cost as a fraction of the income</p></li>
<li><p>Household income</p></li>
<li><p>Monthly utility cost</p></li>
<li><p>Monthly housing cost</p></li>
<li><p>Market value of house</p></li>
<li><p>Number of rooms</p></li>
<li><p>Number of bedrooms</p></li>
<li><p>Age of head of household</p></li>
<li><p>Average area median income</p></li>
<li><p>Year built</p></li>
</ul>
<p>Calculate and display the correlation matrix.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
<p><strong>3b:</strong> A correlation matrix like this is better visualized graphically instead of as a table of numbers. Create a heatmap of the correlation matrix. Use the function <code class="docutils literal notranslate"><span class="pre">heatmap</span></code> in the <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> library. Documentation for heatmap can be found <a class="reference external" href="http://seaborn.pydata.org/generated/seaborn.heatmap.html#seaborn.heatmap">here</a>. Modify your heatmap and try to make it look like the image below.
<img alt="alt text" src="https://raw.githubusercontent.com/stat10/DS10-Python-HW/master/Images/heatmap.png" />
<em>Hints:</em></p>
<ul class="simple">
<li><p>Use the command <code class="docutils literal notranslate"><span class="pre">plt.axis('image')</span></code> to create proportionate looking axes.</p></li>
<li><p>Use the command <code class="docutils literal notranslate"><span class="pre">plt.figure(figsize=(size_along_x,</span> <span class="pre">size_along_y))</span></code> to resize the figure and make it larger</p></li>
<li><p>Look up the documentation for <code class="docutils literal notranslate"><span class="pre">heatmap</span></code> and find the keyword that annotates each cell with the value of the data</p></li>
<li><p>Define a variable (a list would work best) that contains strings coressponding to axis labels and use the keywords <code class="docutils literal notranslate"><span class="pre">yticklabels</span></code> and <code class="docutils literal notranslate"><span class="pre">xticklabels</span></code> in the <code class="docutils literal notranslate"><span class="pre">heatmap</span></code> function to create your own axes labels (for example, <code class="docutils literal notranslate"><span class="pre">yticklabels=mylabels</span></code>)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Exercise 4a:</strong> You have visualized the relationship between the average monthly cost of utilities and the number of rooms in problem 2. Here, we will quantify that relationship using linear regression. Compute the linear regression between the variables containing the number of rooms and the utility cost data. Display the output of the linear regression.</p>
<p>Note that in one of the earlier problems we had replaced certain values with <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>, however <code class="docutils literal notranslate"><span class="pre">linregress</span></code> cannot handle <code class="docutils literal notranslate"><span class="pre">nan</span></code> so use the unmodified data for this part.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
<p><strong>4b:</strong> Calculate the line of best fit and create a figure with a scatter plot of the data and the best-fit line. For a better looking scatter plot, plot using the variable for number of rooms with jitter added and the utility cost with the zero values replaced by <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
<p><strong>4c:</strong> What is the predicted average montly utility cost for a house with 10 rooms? Use the linear regression output to calculate the predicted value and display it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>
</pre></div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="HW08_distributions.html" title="previous page">Homework 08 Exercises</a>
    <a class='right-next' id="next-link" href="HW10_regression.html" title="next page">Homework 10 Exercises</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By DS10<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>